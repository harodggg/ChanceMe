非门结构  ->  CPU -> 二进制 -> 汇编语言 ->  C -> C++ 



1,程序设计的目的是什么，

减少重复繁琐的二进制编码工作，更方便，快捷的利用资源。

2，为什么大多数语言有控制流？逐行跳转，和执行。离需求很远（教务系统，自动打车的APP)

3, 为什么类型申明在C 语言中要和控制流隔离开来

4，现在主流语言最基本的是什么

5，有没有语言它的类型结构，在运行时也可以改变。



动态性

什么是动态性？

1，编译后确定了什么信息，之后不再改变。 

2，运行时可以改变，添加什么。 

3，运行时是不是保存类型信息。



程序中的信息分为几类？

1，数据信息

a) 编译时的Meta-Data元数据(类型框架，空间占用)

b)运行时的Meta-Data元数据（继承体系，用于new或者反射)

c)堆栈段中地址的偏移

d)静态段中的地址

2， 指令信息

a)代码段（动态性需要操作系统或者虚拟机支持，列如动态链接库，动态类加载，lisp语言自生成代码）



汇编语言没有动态性吗？

没有，寄存器，数据段，堆栈，代码段完全由程序员控制。 完全写死了的。根据冯诺伊曼结构的规则{取指令，执行}*。

3，既然有数据段了，还用堆栈段来做什么？这不是多余？

一开始没有堆栈，直到60年代出现了模块化，才有堆栈。汇编中的模块叫子程序，不过仍旧依靠程序员全权控制。



堆栈和模块化的功能有？ 

1，递归

2，功能分离到模块，可复用

3，封装作用域



堆栈和模块化的缺点？

1.时间上：保存现场，还原现场的代价（另外，高级语言编译“消除尾递归”节约部分成本）

2.空间上：爆炸的危险



C语言比起汇编多了什么东西

1.编译器

2.表达式（ 相比汇编，可以处理多个操作数）

3.函数和模块{}(真.模块化，栈操作无需要程序员完成)

4.类型(原子类型，结构类型，数组，指针)

5.头文件，库

c语言并没有比汇编多出新的特性，它只是把汇编的繁琐操作抽离出来，让编译器完成，减轻程序员负担。



2.编译器的作用是？(减少程序员负担)

1.解析表达式，控制流（汇编中指令只有1-3个操作数，而表达式可以多个操作数）

2.模块和函数的抽象（完成堆栈中保存恢复现场的工作）

3.类型变量的管理（所有变量被替换成直接访问的地址，最快的访问速率）

4.代码优化



变量可以替换成直接访问地址的？

1，编译时的Meta-Data(struct的成员，数组的长度，以便替换到指令流；只在编译器维护，编译结束后丢弃)

2，计算出每个变量相对于模块的偏移（一旦算出该偏移地址，将固定到代码中，无法改变；就是说编译完成后，将所有的变量的偏移地址都固定下来）

3，对变量的存储进行管理（所有的变量/内存地址的布置，都是在编译时确定的；也就是说，可执行代码中没有类型信息，只有地址，任何数据都是地址操作，完全和汇编类似。至于编译器的安排，那是更下一层的类似缓存策略算法的结果）。



编译出来的执行代码和汇编的执行代码有特征的区别吗？

没有。特别时在编译器优化之后。 

无法通过执行代码，区分汇编和C程序。



从效率上来说，C的多余代价在哪里？

1.编译的时间

2.模块化的堆栈操作

总之，经过优化的c程序代码与汇编效率几乎相同。

因为从理论上来说，C 并没有引入运行时的新机制。

我理解的C语言只是一种编译器的宏。



C++比c语言多了什么

1.成员函数

2.类型继承体系

3.虚函数，虚继承

4.模板

5.涉及到了多种编程范式（开始更加抽象，语言开始脱离冯诺伊曼的线性结构）

其中，面向对象思想，让程序和现实事务的关系更加紧密。程序设计的负担，也因为与设计模式的流行，变的轻松。



编程范式时什么

一套指导思想行为准则

c是过程式，haskell是函数式的，java面向对象，python大杂烩，shell调用命令的，lua调用c的，php页面，ProLog是线性逻辑推理的，css 是描述网页表现的，HTML描述网页内容的。）



C++有什么编程范式

1.过程式（使用STL的类C语言编程） 

2.ADT式（自定义抽象数据类型，继承；但是不用new,不用virtual；拷贝构造；为了防止资源泄露，也发明了RALL的方式进行资源的初始化和释放）

3.面向对象式（使用new,使用virtual，需要指针或引用；实现多态。)

4.泛型编程（<<modern c++ design>>各种奇淫技巧，业务层面比较少）



c++编译器是怎么样实现的？

C++开始有一个叫做cfront的编译器，即把c++语言翻译成C语言，然后再用C编译器来编译，C的编译器并不知到此段代码来自C++还是C。



c++语言特性分别是怎么样实现的？简单说

1，成员变量：和c语言的struct类似，最后会被直接替换成地址，便于高效访问。

2，成员函数：使用特殊函数名编码方案，翻译成C函数，并添加this指针作为参数。（如—clsA123fun001(..,clsA **this)

3,类型继承体系： 通过c++编译时的Meta-Data来实现。即再编译时，编译器时知道类型信息和继承体系的，但是在编译成C语言后就失去此类型信息（把类型信息转换成结构）

4,虚函数，虚继承：为了支持多态，这也是“面向对象”最重要的特性，使用了虚函数表和虚基类表。注意，运行时多态时通过运行时查表实现的。

5，模板：通过代码复制的方式的实现。每次编译重新编译，不能编译成库文件直接使用。



C++编译器的准则和virtual机制？

1.首先，c++的编译准则，希望做到与C一样的效率。希望做到以下：

--a)没有运行时调用间接性，任何数据在运行时都是一个地址可以直接访问到。

--b)没有运行时的Meta-Data.无需通过Meta-Data来访问复杂的类层次。

--c)所有的数据都希望用C 中的struct来实现，即在编译时就确定号对象及成员地址。

2.以上，在过程式范式，与ADT范式中都是成立的。

3.但是，在面向对象范式中，渴望做到：

** 需要维护着同一个继承体系成员结构的一致性，只有这样，才能保证运行时的多态性。即希望通过同一个入口，访问到父类或者子类的相同数据成员，函数成员，而不在乎具体对象的是父类还是子类。**

c++的virtual机制如何实现的?

a)虚函数

i,虚函数，运行时，每个有虚函数的类型（哪怕时子类）都维持着一个虚函数表，这已经时运行时的Meta-Data,通过查表，即可以找到对象自己的虚函数。 

ii.例如clone肯定时object.__vptr_Base->#3(),无论具体的对象。

b）多重继承

--如何处理后续的Base基类？由编译器判断指针类型并加上相应的偏离。

c)虚继承

--添加一个虚基类指针，指向共享部分。

这样的缺点由两个：

1，虚基类的子类都要背负一个基类指针指向共享部分。如果继承了多个虚基类，还需要多个这样的指针。（Microsoft的解决方法时增加一个虚基类表，类似于虚函数表。）

2.虚继承链条的增加，会导致间接访问的层次增加。列如两个菱形继承的串联。

跨平台的级别有哪些级别？--头文件，库，源代码。

1，c++确实在源码的层次时可能跨平台的（例如<<posa2>>中加了针对不同平台的各种宏的代码）

2， 也可以通过相同的头文件取访问不同平台的库。 

3，但是，不同的操作系统中的不同的API大大增加了跨平台的维度。

4，跨平台的责任留给了程序员（充斥着大量的宏的c++跨平台代码确实让人头疼） 

5，编译器面对不同的系统也不敢作为，他只是负责编译源代码，链接。



如何使用C++才能保证其高效的性能？

1.有额外的负担的机制： 虚函数，虚继承，拷贝构造。

2.用一次虚继承，多了一次指针寻址的效率损失。(另，虚基类没有成员变量，没有虚函数的时候会被优化。这也是java可以多重继承接口interface的原因.)

3,用一次虚函数，多了一次指针寻址的效率损失，并且相对于inline内联（另，inline是编译器优化的重头），还损失了保存和恢复现场的效率。

4，不要使用virtual在复杂的多继承，深层次继承中。

5，编译速度会比较慢:virtual机制会使编译器处理更多的Meta-Data 



**java** 

java语言比c++多了什么

1.虚拟机

a)跨平台

b)动态编译

c)动态特性

2.没有指针

3.没有类的多继承，有接口的继承

4.统一个库

从编译上来说，java比c++迈出了一大步。

它的跨平台特性和运行时的灵活性，为java自己以及未来的语言提供了更多的可靠性。

虚拟机的好处是什么

1.跨平台，在os于字节码间隔了一层。实现了程序员无负担的跨平台。

2.动态编译：许多信息不必再编译后确定，为动态特性提供可能，

3.运行时维护着类型信息，甚至可以加载新的类型。(CORBRA依赖这个实现)



JAVA编译执行的过程是怎么样的？

1.编译后产生一个基于堆栈的字节码。

2.JRE在不同的OS上提供支持。

3.起初的JRE是解释执行的,效率低下.

a)获取待执行的下一个字节码.

b)解码.

c )从操作数堆栈获取所需要的操作数.

d)按照JVM规范执行操作.

e)将结果写回堆栈.

JAVA是如何解决执行效率低下的问题呢?

使用JIT(Just-in-time)编译器进行动态编译.

JIT(Just-in-time)是怎么样运行的呢?如何解决效率问题?

1,每次按照一个function来编译.转换成中间表示,并优化其效率,再生成可执行代码

2,编译器的编译线程和执行线程是分开的,应用程序不会等待编译的执行.

3,分析框架的ｐｒｏｆｉｌｅｒ会观察到程序行为，对频繁执行的ｆｕｎｃｔｉｏｎ进一步优化．（例如ｆｕｎｃｔｉｏｎ内部对象维持一个池不必每次生成）

动态编译的优点是什么？

可以根据程序的行为，优化其代码

１.例如频繁执行的ｆｕｎｃｔｉｏｎ－－热方法

２.例如ａｒｒａｙCｏｐｙ方法，如果每次都拷贝大段内存，在指令集中有特别指令可以加速．

３．例如类层次结构，多态的优化．（大多数虚调用都有其固定的目标，JIT因此生成的直接调用代码比虚表调用的代码的效率会更高）

动态编译的缺点有什么？

１．大量的初始编译会影响程序的启动时间．

２.运行时候的编译，行为分析都需要花费时间．

３.运行效率达到稳定需要时间．

４．实时GUI形的程序不能忍受＂动态编译＂和＂GC＂带来的延迟．



ＪＡＶＡ如何解决实时的需求？

使用ＡＯＴ（Ａｈｅａｄ－ｏｆ－ｔｉｍｅ）编译器：预先编译成可执行码．

AOT(Ａｈｅａｄ－ｏｆ－ｔｉｍｅ)的缺点：

对于一些动态特性的支持效率低下：
１．反射机制

２.运行时加载类

JIT与AOT的对比

总体来说，JＡＶＡ适合怎样的应用呢？

ｊａｖａ比较时候需要长期运行的应用，例如ｗｅｂ服务，Dａｅｍｏｎ服务．



＊＊函数式语言＊＊　

１．函数式语言

ａ）Ｌｉｓｐ　

ｂ）Sｃｈｅｍｅ

ｃ）Ｈａｓｋｅｌｌ

ｄ）Ｆ＃？

２.包含了函数式特性的语言

ａ）ｐｙｔｈｏｎ

ｂ）ｊａｖａｓｃｉｐｔ　

ｃ）Ｊａｖａ

ｄ）ｃ　

函数式编程语言有哪写特性？

１.函数无副作用，只对输入输出有作用．

２.高阶函数，ｌａｍｄａ演算．（这个像ｃ函数指针，但是它是高阶的，即返回值也可能是函数）　

３.没有过程，类似规格说明的语法，更容易理解和自解释．

４.基于ｌｉｓｔ的编程，函数更通用

５．惰性计算

６．有对应的数学形式化表达，有可能证明其正确性．

７.其模型适合多核，或者分布式计算

ａ）　不变性

ｂ）　惰性计算／按需计算

ｃ）＊＊最重要的是，由于函数式语言不可再同一数据上做修改，每一次运用一个函数都会在新的位置上产生更多的新数据，这与过程式语言在同一位置对数据做多次操作不同：函数式语言的函数依赖于前一次函数产生的结果数据，过程式语言依赖数据的位置．这里函数式语言就暗含了计算的依赖顺序，如果没有前后顺序关系，就可以并发．而过程式语言没有指定这个顺序，就需要通过加锁，Aｃｔｏｒ，ｃｈａｎｎｅｌ等模式来指定这个顺序．

总的来说，函数式语言，向着抽象迈进了一大步，更像是数学上的表达，几乎与冯诺伊曼体系断绝的关系．



函数式语言的劣势

１，效率不高（因为抽象，远离了冯诺伊曼体系）

２，平台以及开发环境都比较简单

３，缺少推广．应用不广泛



＊＊逻辑程序设计＊＊　

Pｒｏｌｏｇ语言，线性逻辑．人工智能语言．

＊＊总结＊＊　

动态性有哪些呢？

１．多态性：运行时根据具体对象来访问属于它的方法．

２.　反射：运行时维系着类型结构的Mｅｔａ－Ｄａｔａ．

３．运行时类加载：运行后再次加载新的数据类型和指令流．

４.　动态链接：ｏｓ根据按需要链接库文件．

编译语言和解释型语言的分界再哪里？

语言本身并没有编译类型或者解释类型．（例如：JAVA也可以静态编译后可执行代码）只有少数运行时特性时依赖于解释型的．（可能需要运行环境的支持）

为什么解释语言都需要虚拟机或者运行环境的支持？

动态编译，运行Mｅｔａ－Ｄａｔａ的保存，这些功能对于每个程序都是一致的．所以把他们分离开来，不必要每个程序植入这些代码

非脚本语言和脚本语言

脚本语言，我理解时负责调度其他代码的语言．

例如ｓｈｅｌｌ脚本（调用命令），ｌｕａ（调用ｃ）．

跨平台分为哪些层次？

１，源码跨平台（ｃ，ｃ＋＋，但是因为系统调用接口不同，程序员负担太大，但是汇编却不是）

２，　执行码跨平台（ＪＡＶＡ，有些语言直接从源码解释执行，例如Jａｖａｓｃｒｉｐｔ，ＰＨＰ）

学术上有哪些试验性语言？

１.Fｏｒｔａｎ　

２．ＡＬＧＯ５８

３．ＡＬＧＯＬ６０

4. LiSP
5. smalltalk

常用语言

 过程式： C，ALGOL，PASCAL,

面向对象式： C++， smalltalk, JAVA,Delphi

函数式： LISP，scheme， Heskell,

逻辑式： Prolog

脚本：PHP，Python,Ruby

存储描述信息：XML,CSS,HTML 



**回答问题** 

程序设计语言的目的是什么？

1.控制数据

2.控制指令流



为什么大多数语言有控制流？ 逐行执行+跳转。这与我们的需求差很远。

逐行执行，很大程度是起源于冯洛伊曼体系结构。 



为什么类型申明在C语言中要与控制流隔离开来？

因为在编译时，具体的类型信息，要转换成地址偏移，然后替换控制流中的类型变量。 



现在主流语言的基本元素是？

控制流与类型系统。



有没有语言它的类型结构，在运行时也可以改变？

Javascript只有对象没有类，使用prototype的方式继承，运行时给某个对象添加新的数据成员。没有类型系统。

许多后来的语言在运行时都保存着类型信息，例如Python,Java.

　

＊＊总上所述＊＊　

控制流－－指令流

类型系统－－为了计算变量的地址信息

区分运行时的Mｅｔａ－Ｄａｔａ与编译时的Mｅｔａ－Ｄａｔａ









